clc;
clear;
%%%%%%%%%%%%%% 发动机map(67kw) %%%%%%%%%%%%%%(转速和转速范围均缩小到常用区间)
enginMap=[0 0 0 0 0 0 0 0 0 0 0 0 0 0
0.2104 0.2762 0.3358 0.3968 0.4555 0.5107 0.5654 0.6084 0.6489 0.6989 0.7609 0.8241 0.9337 1.0501
0.2543 0.3278 0.3974 0.4683 0.5398 0.6116 0.6844 0.7615 0.8402 0.9345 1.0476 1.1666 1.3068 1.4549
0.3026 0.3821 0.4583 0.5344 0.6139 0.698 0.7837 0.8718 0.9618 1.0574 1.1594 1.2645 1.3941 1.5294
0.366 0.4576 0.5479 0.6378 0.7303 0.8266 0.9241 1.0276 1.1332 1.2439 1.3602 1.4795 1.6263 1.7791
0.4222 0.5247 0.6272 0.7288 0.8324 0.9389 1.046 1.1614 1.2789 1.4 1.5252 1.6529 1.8132 1.9797
0.4781 0.5939 0.7088 0.8225 0.9379 1.0561 1.1745 1.3005 1.428 1.5574 1.6887 1.8217 1.9975 2.1801
0.5375 0.6677 0.7939 0.9176 1.0442 1.1755 1.3071 1.4474 1.5896 1.736 1.8873 2.0412 2.2215 2.4072
0.5912 0.7344 0.872 1.0067 1.1446 1.2882 1.432 1.5842 1.7381 1.8983 2.0659 2.2367 2.4224 2.6126
0.6391 0.7938 0.9443 1.0919 1.2424 1.3977 1.5531 1.7144 1.8767 2.0467 2.2258 2.4081 2.6032 2.8027
0.6814 0.8461 1.0092 1.1701 1.333 1.4993 1.6655 1.8362 2.0078 2.1848 2.3686 2.5546 2.76 2.9699
0.7201 0.8953 1.0692 1.2413 1.4148 1.5907 1.7664 1.945 2.124 2.3087 2.5005 2.6943 2.9048 3.1192
0.7555 0.9425 1.1252 1.3059 1.4878 1.672 1.8558 2.0408 2.2256 2.4194 2.6243 2.832 3.0416 3.2537
0.8269 1.021 1.2111 1.3963 1.5772 1.7537 1.9258 2.1171 2.3082 2.5176 2.7495 2.9868 3.2003 3.4155
0.9059 1.1164 1.3155 1.5066 1.6893 1.8636 2.0297 2.228 2.4255 2.6501 2.9083 3.1742 3.417 3.6637
0.994 1.2322 1.4428 1.6415 1.8301 2.0094 2.1777 2.384 2.5883 2.8277 3.1109 3.4035 3.7072 4.0205
1.0874 1.3674 1.6195 1.8646 2.0924 2.2992 2.4939 2.7266 2.9563 3.2074 3.4856 3.7683 4.1311 4.5078];  %转置，横坐标为转矩，纵坐标为转速    这个表格的单位是g/kwh(此值越小越好)


a=[800 1000 1200 1400 1600 1800 2000 2200 2400 2600 2800 3000 3200 3400];    %14
b=[0 10 20 30 40 50 60 70 80 90 100 110 120 130 140 150 160];      %17 一定要有0，这很关键

[Tnum,Nnum]=size(enginMap);
%%%%%%%%%%%%%%% map处理 %%%%%%%%%%%%%%%%%%%
% engine_consumption=zeros(Tnum,Nnum);
% for ii=1:Nnum
%     for i=1:Tnum
%          engine_consumption(i,ii)=enginMap(i,ii)*b(i)*a(ii)/(9550*3600);        % 这个表格中的单位是g
%     end
% end

%%%%%%%%%%%%%% 计算点集合 %%%%%%%%%%%%%%%%%%%
dataload=[];
group=zeros(1,3);
for ii=1:Tnum
    for i=1:Nnum
        group(1)=a(i);              %转速
        group(2)=b(ii);             %转矩
        group(3)=enginMap(ii,i);
        dataload=[dataload;group];
    end
end

X=dataload(:,1);
Y=dataload(:,2);
Z=dataload(:,3);
cftool
